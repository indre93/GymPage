<h1>Add a Workout</h1>

<div class="content">
   <%= render partial: "layouts/alerts", locals: { object: @workout } %>
   <%= render partial: "layouts/alerts", locals: { object: @workout.routines } %>
   <%= render partial: "layouts/alerts", locals: { object: @workout.exercises } %>

   <div class="workout-form">
      <%= form_for(@workout) do |f| %>
         <div class="select-date">
            <%= f.label :date %>
            <%= f.date_select :date, order: [:month, :day, :year] %>
         </div>
         <div>
            <%= f.label :duration %>
            <%= f.text_field :duration, placeholder: "Please include hours/minutes" %><br>
         </div>
         <div>
            <%= f.label :description, "Description" %>
            <%= f.text_area :description %>    
         </div>

         <br>
         
         <!-- DOUBLE NESTED FORM -->

         <div class="add-routine-exercise">
            <%= f.fields_for :routines do |routine_field| %>
               <fieldset>
                  <legend><%= routine_field.label :exercise_id, "Select Existing Exercise" %></legend>
                  <%= routine_field.collection_select(:exercise_id, Exercise.by_name, :id, :name, include_blank: true) %>

                  <%= routine_field.fields_for :exercise do |exercise_field| %>
                     <legend><%= exercise_field.label :name, "Or Add New Exercise:" %></legend>
                     <%= exercise_field.text_field :name, placeholder: "Exercise name" %><br>

                     <%= exercise_field.label :category, "Category:"  %>
                     <%= exercise_field.select :category, options_for_select(category_options), include_blank: true %>

                     <legend><%= routine_field.label :caption, "Exercise Rotine" %></legend>
                     <%= routine_field.text_field :caption %>
                  <% end %>
               </fieldset>
            <% end %>      
         </div>

         <%= f.submit "Add Workout" %>
      <% end %>
   </div>
</div>